---
// Import Tailwind styles
import '../../styles/global.css';
import BaseLayout from '../../layouts/BaseLayout.astro';
import Icon from '../../components/Icon.astro';
import { SEO } from "astro-seo";
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const blogEntries = await getCollection('blog');
  return blogEntries.map(entry => ({
    params: { slug: entry.slug },
    props: { entry }
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
const articleUrl = `https://guiziweb.github.io/blog/${entry.slug}/`;
---

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <SEO
      title={`${entry.data.title} - Guiziweb`}
      description={entry.data.description}
      canonical={articleUrl}
      openGraph={{
        basic: {
          title: entry.data.title,
          type: "article",
          image: entry.data.heroImage || "https://guiziweb.github.io/favicon.svg",
          url: articleUrl
        },
        optional: {
          description: entry.data.description,
          siteName: "Guiziweb - Solutions IA Entreprise",
        },
        article: {
          publishedTime: entry.data.pubDate.toISOString(),
          modifiedTime: entry.data.updatedDate?.toISOString() || entry.data.pubDate.toISOString(),
          author: [entry.data.author],
          tags: entry.data.tags
        }
      }}
      twitter={{
        card: "summary_large_image",
        title: entry.data.title,
        description: entry.data.description,
        image: entry.data.heroImage || "https://guiziweb.github.io/favicon.svg"
      }}
      extend={{
        meta: [
          { name: "keywords", content: entry.data.tags.join(", ") },
          { name: "author", content: entry.data.author },
          { name: "robots", content: "index, follow" },
          { name: "theme-color", content: "#2563eb" },
          { name: "viewport", content: "width=device-width, initial-scale=1.0" }
        ]
      }}
    />

    <!-- Google Fonts - Preload for Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer">


    <!-- Performance & SEO Meta Tags -->
    <meta name="msapplication-navbutton-color" content="#2563eb">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body class="font-inter antialiased bg-gray-950 text-gray-100">

    <!-- Simple Navigation for Articles -->
    <nav class="fixed w-full z-50 bg-gray-900/95 backdrop-blur-xl shadow-2xl border-b border-gray-800">
        <div class="container mx-auto px-4 lg:px-8">
            <div class="flex justify-between items-center py-3 sm:py-4">
                <div class="flex-shrink-0">
                    <h1 class="text-xl sm:text-2xl font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent">
                        <Icon name="fa-code" class="mr-1 sm:mr-2 text-lg sm:text-xl" />
                        <a href="/">Guiziweb</a>
                    </h1>
                </div>
                <div class="flex items-center space-x-6">
                    <a href="/" class="text-gray-300 hover:text-blue-400 transition-all duration-300 text-sm lg:text-base">Accueil</a>
                    <a href="/blog/" class="text-blue-400 font-medium text-sm lg:text-base">Blog</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Article Hero Section - Compact Professional Design -->
    <section class="pt-20 pb-8 bg-gray-950" style="background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);">
        <div class="container mx-auto px-4 lg:px-8">
            <div class="max-w-4xl mx-auto">
                <!-- Breadcrumbs -->
                <nav class="mb-6">
                    <ol class="flex items-center space-x-2 text-sm text-gray-400">
                        <li><a href="/" class="hover:text-blue-400 transition-colors">Accueil</a></li>
                        <li><Icon name="fa-chevron-right" class="text-xs" /></li>
                        <li><a href="/blog/" class="hover:text-blue-400 transition-colors">Blog</a></li>
                        <li><Icon name="fa-chevron-right" class="text-xs" /></li>
                        <li class="text-gray-300 truncate">{entry.data.title}</li>
                    </ol>
                </nav>

                <!-- Article Header -->
                <header class="mb-8">
                    <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold mb-4 leading-tight text-gray-100">
                        {entry.data.title}
                    </h1>

                    <p class="text-lg text-gray-400 mb-6 leading-relaxed max-w-3xl">
                        {entry.data.description}
                    </p>

                    <!-- Article Meta -->
                    <div class="flex flex-wrap items-center gap-6 text-sm text-gray-500 border-b border-gray-800 pb-6">
                        <div class="flex items-center">
                            <Icon name="fa-calendar" class="mr-2 text-blue-400" />
                            <time datetime={entry.data.pubDate.toISOString()}>
                                {entry.data.pubDate.toLocaleDateString('fr-FR', {
                                    year: 'numeric',
                                    month: 'long',
                                    day: 'numeric'
                                })}
                            </time>
                        </div>

                        <div class="flex items-center">
                            <Icon name="fa-user" class="mr-2 text-cyan-400" />
                            <span>{entry.data.author}</span>
                        </div>

                        <div class="flex items-center">
                            <Icon name="fa-clock" class="mr-2 text-green-400" />
                            <span>5 min de lecture</span>
                        </div>

                        {entry.data.updatedDate && (
                            <div class="flex items-center">
                                <Icon name="fa-edit" class="mr-2 text-purple-400" />
                                <span>Mis à jour le {entry.data.updatedDate.toLocaleDateString('fr-FR')}</span>
                            </div>
                        )}
                    </div>

                    <!-- Tags -->
                    {entry.data.tags.length > 0 && (
                        <div class="flex flex-wrap gap-2 mt-4">
                            {entry.data.tags.map((tag) => (
                                <span class="px-3 py-1 bg-blue-500/10 text-blue-400 text-xs font-medium rounded-md border border-blue-500/20">
                                    #{tag}
                                </span>
                            ))}
                        </div>
                    )}
                </header>
            </div>
        </div>
    </section>

    <!-- Article Content -->
    <article class="py-12 bg-gray-900">
        <div class="container mx-auto px-4 lg:px-8">
            <div class="max-w-4xl mx-auto">

                {entry.data.heroImage && (
                    <img
                        src={entry.data.heroImage}
                        alt={entry.data.title}
                        class="w-full h-64 object-cover rounded-lg mb-8"
                    />
                )}

                <div class="prose prose-lg prose-invert max-w-none prose-h1:text-blue-400 prose-h2:text-blue-400 prose-h3:text-gray-200">
                    <Content />
                </div>

                <div class="mt-12 pt-8 border-t border-gray-700 flex justify-between items-center">
                    <a href="/blog/" class="text-blue-400 hover:text-cyan-400">
                        ← Retour au blog
                    </a>
                    <div class="flex space-x-4">
                        <a href={`https://twitter.com/intent/tweet?url=${Astro.url.href}`} target="_blank" class="text-gray-400 hover:text-blue-400">
                            <Icon name="fab fa-twitter" />
                        </a>
                        <a href={`https://www.linkedin.com/sharing/share-offsite/?url=${Astro.url.href}`} target="_blank" class="text-gray-400 hover:text-blue-400">
                            <Icon name="fab fa-linkedin" />
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </article>

    <!-- Related Articles CTA -->
    <section class="py-16 sm:py-24 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900">
        <div class="container mx-auto px-4 lg:px-8 text-center">
            <div class="max-w-3xl mx-auto">
                <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-gray-100 mb-6">
                    Découvrez nos <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-cyan-400">autres articles</span>
                </h2>
                <p class="text-lg text-gray-400 mb-8">
                    Explorez plus de contenu sur l'intelligence artificielle et l'automatisation d'entreprise.
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="/blog/" class="bg-gradient-to-r from-blue-600 to-blue-500 text-white px-8 py-4 rounded-lg font-semibold hover:from-blue-700 hover:to-blue-600 transition-all duration-300 shadow-lg hover:shadow-blue-500/25">
                        <Icon name="fa-newspaper" class="mr-2" />
                        Tous les articles
                    </a>
                    <a href="/" class="border border-gray-600 text-gray-300 px-8 py-4 rounded-lg font-semibold hover:bg-gray-800 hover:border-gray-500 transition-all duration-300">
                        <Icon name="fa-calendar-alt" class="mr-2" />
                        Parlons de votre projet
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Schema.org JSON-LD for Article -->
    <script type="application/ld+json" set:html={JSON.stringify({
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "headline": entry.data.title,
        "description": entry.data.description,
        "author": {
            "@type": "Person",
            "name": entry.data.author
        },
        "datePublished": entry.data.pubDate.toISOString(),
        "dateModified": entry.data.updatedDate?.toISOString() || entry.data.pubDate.toISOString(),
        "image": entry.data.heroImage,
        "publisher": {
            "@type": "Organization",
            "name": "Guiziweb",
            "logo": {
                "@type": "ImageObject",
                "url": "https://guiziweb.github.io/favicon.svg"
            }
        },
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": articleUrl
        }
    })}></script>

    <!-- Navigation scripts -->
    <script>
        // Mobile menu functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Add basic navigation functionality
            const links = document.querySelectorAll('a[href^="#"]');
            links.forEach(link => {
                link.addEventListener('click', function(e) {
                    const targetId = this.getAttribute('href');
                    if (targetId && targetId.length > 1) {
                        const targetSection = document.querySelector(targetId);
                        if (targetSection) {
                            e.preventDefault();
                            const offsetTop = targetSection.offsetTop - 80;
                            window.scrollTo({
                                top: offsetTop,
                                behavior: 'smooth'
                            });
                        }
                    }
                });
            });
        });
    </script>

</body>
</html>